---
title: Crystal 1.16.0 is released!
version: 1.16.0
date: 2025-04-09
author: straight-shoota
---

We are announcing a new Crystal release 1.16.0 with several new features and bug fixes.

Pre-built packages are available on [GitHub Releases](https://github.com/crystal-lang/crystal/releases/tag/1.16.0)
and our official distribution channels.
See [crystal-lang.org/install](https://crystal-lang.org/install/) for
installation instructions.

## Stats

This release includes [XX changes since 1.15.1](https://github.com/crystal-lang/crystal/pulls?q=is%3Apr+milestone%3A1.16.0)
by XX contributors.  We thank all the contributors for all the effort put into
improving the language! ❤️

## Changes

Below we list the most remarkable changes in the language, compiler and stdlib.
For more details, visit the [full changelog](https://github.com/crystal-lang/crystal/releases/tag/1.16.0).

### Breaking

#### Fixed implementation of `File.match?`

The implementation of [`File.match?`] was insufficient and has been replaced by a new algorithm.
This change should not affect any behaviour that was previously working as documented.

The correction of implementation bugs leads to the following changes in observed behaviour:

- Wildcard and globstar are able to match non-greedily. For example, `**/a` now matches `a`.
- Globstar matches full path segments only, otherwise it's just two wildcards (which is equivalent to a single one). For example, `a**` no longer matches `ab/c` (but it matches `ab`).
- Subpatterns in branches are parsed with respect to their respective syntactical context. For example, `{[}]}` now matches `}`.
  It parses as a branch with one subpattern that describes the character set `}`. Previously, this was a parse error.
- Escapes for special character are recognized. For example, `\\t` now matches `\t` while previously it matched `t`.
- The grammar for parsing character classes is more flexible. For example, `[a-]`, now matches `a` and `-`. Previously, it was a pattern error (incomplete character range).

Note: [`Dir.glob`] is implemented differently and does not share the same invalid behaviour. There were no changes to it.

_Thanks, [@straight-shoota]_

#### Parameter name suffixes are deprecated

The suffixes `?` and `!` for parameter names of defs, macros and blocks are deprecated.  This aligns them with other variable names.  They produce a warning now ([#12197]).
_Thanks, [@potomak]_

[#12197]: https://github.com/crystal-lang/crystal/issues/12197

#### Implicit return type of `Enumerable#sum` and `#product`

[`Enumerable#sum`] and [`#product`][`Enumerable#product`] no longer resolve an implicit return type when the element type is a union. This can't work reliably.
Instead, you need to specify the sum/product type explicitly by the `initial` parameter with a value of the intended return type. ([#15314])

_Thanks, [@rvprasad]_

[#15314]: https://github.com/crystal-lang/crystal/issues/15314

#### Resource string in `HTTP::Request`

[`HTTP::Request`] was fixed to correctly parse HTTP resource strings that look like an absolute URL.
This may break code that relied on the previous, buggy behaviour ([#15499]).

_Thanks, [@straight-shoota]_

[#15499]: https://github.com/crystal-lang/crystal/issues/15499

#### Environment changes for subcommands

The compiler won't set the environment variable `$CRYSTAL` when running a process for a subcommand.
This variable was only in introduced in [#14953] in 1.14.0.
We addded a more flexible alternative `$CRYSTAL_EXEC_PATH`, and the equivalent to `$CRYSTAL` is now `$CRYSTAL_EXEC_PATH/crystal`. The compiler also prepends its path to `$PATH` ([#15186]).

_Thanks, [@straight-shoota]_

[#14953]: https://github.com/crystal-lang/crystal/issues/14953
[#15186]: https://github.com/crystal-lang/crystal/issues/15186

### Execution Contexts

[RFC 0002](https://github.com/crystal-lang/rfcs/pull/2)

### Language

- [`Slice.literal`] can infer the element type ([#15529]) and works in the interpreter ([#15531]).

_Thanks, [@HertzDevil]_

- `sizeof` and `alignof` work inside macros for stable types ([#15497]).

_Thanks, [@HertzDevil]_

[#15529]: https://github.com/crystal-lang/crystal/issues/15529
[#15531]: https://github.com/crystal-lang/crystal/issues/15531
[#15497]: https://github.com/crystal-lang/crystal/issues/15497

### Standard library

- Several bug fixes and performance improvements to `Path` handling, especially for Windows paths.

_Thanks, [@HertzDevil]_

- New methods `Indexable#find` and `#find!` ([#15552]).

_Thanks, [@punteek]_

- New methods `EventLoop#wait_readable`, `#wait_writable` ([#15376]).

_Thanks, [@ysbaddaden]_

[#15552]: https://github.com/crystal-lang/crystal/issues/15552
[#15376]: https://github.com/crystal-lang/crystal/issues/15376

### Compiler

- The compiler CLI understand the long option `--output` everywhere, instead of just the short variant `-o` ([#15519]). It also accepts a directory name as value, in which case the file name is derived from the source filename ([#15471]).

_Thanks, [@HertzDevil], [@straight-shoota]_

- The compiler respects the environment variable `$MACOSX_DEPLOYMENT_TARGET`, which should
get rid of annoying linker warnings when target versions mismatched ([#15603])

_Thanks, [@HertzDevil]_

[#15519]: https://github.com/crystal-lang/crystal/issues/15519
[#15471]: https://github.com/crystal-lang/crystal/issues/15471
[#15603]: https://github.com/crystal-lang/crystal/issues/15603

### Compiler tools

The doc generator can optionally include `private` and `protected` objects as well as objects in lib bindings (`lib`, `fun`, `union`, `cstruct`, `external`, and `type`), as proposed in [RFC 0011](https://github.com/crystal-lang/rfcs/blob/main/text/0011-extending-api-docs.md). The `:showdoc` directive enables that.

```crystal
# :showdoc:
# Documentation for LibFoo
lib Foo
  # Documentation for function foo
  fun foo : Void
end

# :showdow:
# Documentation for method bar
private def bar
end
```

_Thanks [@nobodywasishere]_

### Dependency Updates

- Support for LLVM 20 ([#15412])

_Thanks, [@HertzDevil]_

[#15412]: https://github.com/crystal-lang/crystal/issues/15412

### Deprecations

- [`LLVM::ABI`] (and [`LLVM::TargetMachine#abi`]) is deprecated without replacement ([#15227]).

---

> **THANKS:**
> We have been able to do all of this thanks to the continued support of [84codes] and every other [sponsor](/sponsors).
> To maintain and increase the development pace, donations and sponsorships are
> essential.  [OpenCollective](https://opencollective.com/crystal-lang) is
> available for that.
>
> Reach out to [crystal@manas.tech](mailto:crystal@manas.tech)
> if you’d like to become a direct sponsor or find other ways to support Crystal.
> We thank you in advance!

[84codes]: https://www.84codes.com/
[`LLVM::ABI`]: https://crystal-lang.org/api/1.16.0/LLVM/ABI.html
[`Enumerable#sum`]: https://crystal-lang.org/api/1.16.0/Enumerable.html#sum-instance-method
[`LLVM::TargetMachine#abi`]: https://crystal-lang.org/api/1.16.0/LLVM/TargetMachine.html#abi-instance-method
[`Enumerable#product`]: https://crystal-lang.org/api/1.16.0/Enumerable.html#product-instance-method
[`HTTP::Request`]: https://crystal-lang.org/api/1.16.0/HTTP/Request.html#-instance-method
[`File.match?`]: https://crystal-lang.org/api/1.16.0/File.html#match%3F(pattern%3AString%2Cpath%3APath|String)%3ABool-class-method
[`Dir.glob`]: https://crystal-lang.org/api/1.16.0/Dir.html#glob(patterns:Enumerable,match:File::MatchOptions=File::MatchOptions.glob_default,follow_symlinks:Bool=false):Array(String)-class-method
[`Slice.literal`]: https://crystal-lang.org/api/1.16.0/Slice.html#literal(*args)-class-method
[@HertzDevil]: https://github.com/HertzDevil
[@nobodywasishere]: https://github.com/nobodywasishere
[@potomak]: https://github.com/potomak
[@punteek]: https://github.com/punteek
[@rvprasad]: https://github.com/rvprasad
[@straight-shoota]: https://github.com/straight-shoota
[@ysbaddaden]: https://github.com/ysbaddaden
