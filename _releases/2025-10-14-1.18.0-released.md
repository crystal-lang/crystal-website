---
title: Crystal 1.18.0 is released!
version: 1.18.0
date: 2025-10-14
author: straight-shoota
---

We are announcing a new Crystal release 1.18.0 with several new features and bug
fixes.

Pre-built packages are available on [GitHub
Releases](https://github.com/crystal-lang/crystal/releases/tag/1.18.0) and our
official distribution channels. See
[crystal-lang.org/install](https://crystal-lang.org/install/) for installation
instructions.

## Stats

This release includes [XX changes since
1.17.1](https://github.com/crystal-lang/crystal/pulls?q=is%3Apr+milestone%3A1.18.0)
by XX contributors.  We thank all the contributors for all the effort put into
improving the language! ❤️

## Changes

Below we list the most remarkable changes in the language, compiler and stdlib.
For more details, visit the [full
changelog](https://github.com/crystal-lang/crystal/releases/tag/1.18.0).

### Execution contexts

The default execution context is now parallel, but with `maximum: 1`
([#16136]).
So it starts with a single thread, but it can grow to more with
`Fiber::ExecutionContext::Parallel#resize` ([#15956]).

There are also a number of performance improvements for schedulers and event
loops ([#15961],[#16063]) and we dropped the custom implementation of
`Fiber::ExecutionContext::Concurrent` ([#16135]) it's now based on the parallel
implementation.

`Fiber::ExecutionContext.default_workers_count` has been improved ([#16149]) to
respect the effective CPU count available to the process ([#16148]).

_Thanks, [@ysbaddaden]_

### Deprecation warnings

Deprecation warnings are now available on types and aliases ([#15962]) as well
as individual method parameters ([#15999]).

```cr
@[Deprecated("Here may be dragons")]
class Foo
end

def foo(bar, @[Deprecated("Do not try this at home")] baz)
end
```

_Thanks [@ysbaddaden]_

### Time

#### `Time#inspect`

The format of `Time#inspect` has been adjusted slightly to align with the Internet
Extended Date/Time Format (IXDTF) defined in [RFC 9557] ([#16039]).

Changes from the previous format:
* Replace `UTC` location by `Z` offset
* Skip zero nanoseconds entirely even when `with_nanoseconds` is true (see https://github.com/crystal-lang/crystal/pull/16039#discussion_r2250863021)
* Remove whitespace between time and offset
* Wrap location in square brackets to indicate an IXDTF time-zone suffix

Some examples show the differences:

```cr
a = Time.utc(2014, 1, 2, 3, 4, 5, nanosecond: 123_456_789)
b = Time.local(2014, 1, 2, 3, 4, 5, nanosecond: 123_456_789, location: Time::Location.load("Europe/Berlin"))
c = Time.local(2014, 1, 2, 3, 4, 5, nanosecond: 123_456_789, location: Time::Location.fixed(3600))

# Crystal 1.17:
a.inspect # => "2014-01-02 03:04:05.123456789 UTC"
b.inspect # => "2014-01-02 03:04:05.123456789 +01:00 Europe/Berlin"
c.inspect # => "-2014-01-02 03:04:05.123456789 +01:00"

# Crystal 1.18:
a.inspect # => "2014-01-02 03:04:05.123456789Z"
b.inspect # => "2014-01-02T03:04:05.123456789+01:00[Europe/Berlin]"
c.inspect # => "+2014-01-02T03:04:05.123456789+01:00"
```

`Time::Location.local` now follows symlink names, so that it resolves to the same
timezone by name as `Time::Location.load`, even if `/etc/localtime` points to a
zoneinfo database ([#16002], [#16022]).

`Time::Location.load?` is a new, non-raising variant to `.load` ([#16121]).

`Time#at_beginning_of_week`,`#at_end_of_week` correctly respect the local
timezone ([#16113]).

_Thanks, [@straight-shoota]_

The local Windows system time zone now uses the canonical IANA name ([#15967]).

_Thanks, [@HertzDevil]_

[RFC 9557]: https://datatracker.ietf.org/doc/html/rfc9557

### Serialization

- _(serialization)_ Add `Time::Location.from_json_object_key` ([#15957], thanks @Sija)
- _(serialization)_ Resolve YAML aliases in `YAML::Any` ([#15941], thanks @willhbr)
- _(serialization)_ Embed libxml2 version number on Windows MSVC ([#16104], thanks @HertzDevil)
- _(serialization)_ Add `JSON::Any` wrapper around `JSON::Any#inspect` output ([#15979], thanks

- _(serialization)_ Move `*::Serializable`'s private constructors into `macro included` hook ([#16147], thanks @HertzDevil)

### Stdlib

- Add `summary_width` and `summary_indent` to `OptionParser` ([#15326], thanks @kojix2)
- _(collection)_ Add `Set#select!` and `#reject!` ([#16060], thanks @HertzDevil)
- _(files)_ Add `.set_blocking` to `Socket` and `IO::FileDescriptor` ([#16033], [#16129], thanks @ysbaddaden)@jneen)
- _(system)_ Add `File.readlink?` ([#16004], thanks @straight-shoota)
- _(text)_ Add `SemanticVersion.valid?` & `SemanticVersion.parse?` ([#15051], thanks @devnote-dev)
- _(text)_ Use proper ANSI reset codes in `Colorize` ([#16052], thanks @Blacksmoke16)

### Networking

- _(networking)_ Preserve query params in `StaticFileHandler` redirects ([#15789], thanks @syeopite)
- _(networking)_ Fix `StaticFileHandler` to return 404 on file error ([#16025], [#16077], thanks @straight-shoota)
- _(networking)_ Run `before_request` callback in `HTTP::Client` only once ([#16064], thanks @straight-shoota)
- _(networking)_ Fix `URI#host=` to wrap IPv6 address in brackets ([#16164], thanks @stakach)

### Type restrictions

We added type restrictions to many API methods. This improves the documentation
This is a semi-automatic effort, assisted by a tool that automatically extracts
typing information from the semantic analysis of a program ([#15682]).

`MIME` ([#15834]), `Log` ([#15777]), `Oauth` ([#15687]), `JSON` ([#15840],
[#16142]), `Benchmark` ([#15688]), `Crypto` ([#15694]), `IO` ([#15698]), `HTTP`
([#15710]), `Big*` ([#15689]), `Process` ([#16031]).

_Thanks, [@Vici37]_

### Code Cleanup

Multi-line strings containing source code in compiler specs have had two
different formats: Some of them were using regular string literals, others used
heredocs. The latter was usually preferred in new code additions because
line numbers and indents are more sensible. And with an appropriate heredoc
identifier to denote the language, we even get nested syntax highlighting.
In this release we've converted all compiler specs to use heredocs
([#11291]).

_Thanks, [@HertzDevil]_

With the help of `ameba`, we've enabled and applied a couple more linter rules:
`Style/UnlessElse` ([#16010]), `Style/RedundantBegin` ([#16011]), and
`Lint/UselessAssign` ([#16014]).

_Thanks, @straight-shoota_

### Macros

- _(macros)_ Add `ArrayLiteral#*` and `StringLiteral#*` ([#16154], thanks @jneen)
- _(collection)_ Expand empty `(Named)TupleLiteral` to `(Named)Tuple.new` instead of `{}` ([#16108], thanks @spuun)
- _(macros)_ Add `NumberLiteral#zero?` ([#10248], thanks @Sija)

### Compiler

- _(cli)_ Add the ability to dump type information to a JSON file ([#16027], thanks @HertzDevil)
- _(semantic)_ Resolve types when guessing return type from class method overloads ([#16118], thanks @HertzDevil)
- _(semantic)_ Guess instance variable types from global method calls ([#16119], thanks @HertzDevil)
- _(semantic)_ **[regression]** Ensure hash literals are evaluated from left to right ([#16124], thanks @HertzDevil)
- _(codegen)_ Group temporary variables by file name: compound array assignments ([#16122], thanks @HertzDevil)

### Interpreter

- _(interpreter)_ Add `writer.close_on_finalize = false` for signal pipe ([#16167], thanks @straight-shoota)
- _(interpreter:repl)_ Fully exit the process on `exit!` from REPL ([#16171], thanks @jneen)

### Infra


- Add `REUSE.toml` ([#15992], thanks @straight-shoota)

### Dependencies

- Default to LLVM 16 in `shell.nix` ([#16023], thanks @ysbaddaden)
- _(llvm)_ Support LLVM 21.1 and 22.0 ([#16062], thanks @HertzDevil)
- _(text)_ Update Unicode to 17.0.0 ([#16160], thanks @HertzDevil)


### Deprecations

- _(files)_ **[deprecation]** Deprecate `Socket` and `IO::FileDescriptor` `#blocking` property ([#16033], [#16129], thanks @ysbaddaden)


- _(concurrency)_ **[deprecation]** Deprecate `Atomic::Flag` ([#15805], thanks @ysbaddaden)
- _(files)_ **[deprecation]** Deprecate the `blocking` parameter of `File`, `Socket` and `IO::FileDescriptor` constructors ([#16034], [#16047], thanks @ysbaddaden, @Blacksmoke16)
- _(numeric)_ **[deprecation]** Deprecate `Float::Printer::IEEE` ([#16050], thanks @HertzDevil)
- _(system)_ **[deprecation]** Deprecate `Process::Status#exit_signal` ([#16003], thanks @straight-shoota)

---

> **THANKS:** We have been able to do all of this thanks to the continued
> support of [84codes](https://www.84codes.com/) and every other
> [sponsor](/sponsors). To maintain and increase the development pace, donations
> and sponsorships are essential.
> [OpenCollective](https://opencollective.com/crystal-lang) is available for
> that.
>
> Reach out to [crystal@manas.tech](mailto:crystal@manas.tech) if you’d like to
> become a direct sponsor or find other ways to support Crystal. We thank you in
> advance!

[issue tracker]: https://github.com/crystal-lang/crystal/issues
[forum]: https://forum.crystal-lang.org/
[84codes]: https://www.84codes.com/
[@Blacksmoke16]: https://github.com/Blacksmoke16
[@HertzDevil]: https://github.com/HertzDevil
[@MatheusRich]: https://github.com/MatheusRich
[@foxxx0]: https://github.com/foxxx0
[@luislavena]: https://github.com/luislavena
[@straight-shoota]: https://github.com/straight-shoota
[@ysbaddaden]: https://github.com/ysbaddaden
