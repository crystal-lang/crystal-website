---
title: Crystal 1.19.0 is released!
version: 1.19.0
date: 2026-01-14
author: ysbaddaden
---

We are announcing a new Crystal release 1.19.0 with several new features and bug
fixes.

Pre-built packages are available on [GitHub
Releases](https://github.com/crystal-lang/crystal/releases/tag/1.19.0) and our
official distribution channels. See
[crystal-lang.org/install](https://crystal-lang.org/install/) for installation
instructions.

## Stats

This release includes [230 changes since
1.18.0](https://github.com/crystal-lang/crystal/pulls?q=is%3Apr+milestone%3A1.19.0)
by XX contributors. We thank all the contributors for all the effort put into
improving the language! ❤️

## Changes

Below we list the most remarkable changes in the language, compiler and stdlib.
For more details, visit the [full
changelog](https://github.com/crystal-lang/crystal/releases/tag/1.19.0).

We do not expect any breaking changes in existing code. If you notice any
unexpected issues, please let us know in the [issue tracker] or [forum].

### Breaking

The following changes break prior behavior of the compiler, but we expect them
to not have much effect in existing code. If you notice any unexpected issues,
please let us know in the [issue tracker] or [forum].

#### Compiler flags now have values

The `flag?` macro is now aware of name-value mappings in the form of
`name=value` where `flag?(:name)` will now return the respective `value` as a
`StringLiteral` ([#16310]). A key without a value returns `true` as implicit
value, as before.

Instead of returning a `BoolLiteral` the `flag?` macro might now return a
`StringLiteral` which might be unexpected. The value is still truthy and
shouldn't cause issues in practice.

_Thanks, [@straight-shoota].

[#16310]: https://github.com/crystal-lang/crystal/pull/16310

#### Adjust monotonic clocks

UNIX targets still use `CLOCK_MONOTONIC` with a couple noteworthy exception:

- Linux now uses `CLOCK_BOOTTIME` to include suspended time ([#16516]);
- macOS now uses `CLOCK_MONOTONIC_RAW` instead of `mach_absolute_time`
  ([#16516], [#16492]), because `CLOCK_MONOTONIC` only has microsecond
  resolution.

[#16516]: https://github.com/crystal-lang/crystal/pull/16516
[#16492]: https://github.com/crystal-lang/crystal/pull/16492

### Execution contexts

Execution contexts from [RFC 0002] continue as a final preview feature with
opt-in with compiler flags `-Dpreview_mt -Dexecution_context` and we plan to
finally enable the feature by default in the 1.20 release!

The compiler, for example, is now always built with execution contexts, and the
LLVM codegen is now always multithreaded for every target, including Windows.

There has not been huge developments to the feature, but corrections to fix the
remaining thread safety issues in the standard library, for example:

- Add thread safety to default random ([#16174])
- Closing system fd is thread unsafe ([#16289])
- Thread safety of `Exception::Callstack` ([#16504])

We started to merge synchronization primitives from [`ysbaddaden/sync`]
into the standard library as well:

- Add [`Sync::Mutex`] and [`Sync::RWLock`] ([#16399])
- Add [`Sync::ConditionVariable`] ([#16440])
- Add [`Sync::Exclusive`] and [`Sync::Shared`] ([#16487])

_This effort is part of the [ongoing project to improve multi-threading support]
with the help of [84codes]._

_Thanks, [@ysbaddaden]_

[RFC 0002]: https://github.com/crystal-lang/rfcs/pull/2
[ongoing project to improve multi-threading support]: /2024/02/09/84codes-manas-mt/
[`ysbaddaden/sync`]: https://github.com/ysbaddaden/sync/
[`Sync::Mutex`]: https://crystal-lang.org/api/1.19.0/Sync/Mutex.html
[`Sync::RWLock`]: https://crystal-lang.org/api/1.19.0/Sync/RWLock.html
[`Sync::ConditionVariable`]: https://crystal-lang.org/api/1.19.0/Sync/ConditionVariable.html
[`Sync::Exclusive`]: https://crystal-lang.org/api/1.19.0/Sync/Exclusive.html
[`Sync::Shared`]: https://crystal-lang.org/api/1.19.0/Sync/Shared.html
[#16174]: https://github.com/crystal-lang/crystal/pull/16174
[#16289]: https://github.com/crystal-lang/crystal/pull/16289
[#16504]: https://github.com/crystal-lang/crystal/pull/16504
[#16399]: https://github.com/crystal-lang/crystal/pull/16399
[#16440]: https://github.com/crystal-lang/crystal/pull/16440
[#16487]: https://github.com/crystal-lang/crystal/pull/16487

### Time

Introduces the [`Time::Instant`] type to represent instants on the monotonic
timeline as defined in [RFC 0015] instead of overloading the `Time::Span` type
that represents a duration, not an instant ([#16490]). We expect a clearer and
safer API:

- `Time::Instant` represents a single point on the monotonic timeline.
- `Time::Span` continues to represent a duration.
- Subtracting two `Time::Instant` instances yields a `Time::Span`.
- Adding/subtracting a `Time::Span` to/from an `Time::Instant` yields a new `Time::Instant`.

We also adjusted the monotonic clock ([#16516]), applied the changes ([#16498])
and deprecated `Time.monotonic` ([#16545]).

Finally, we made some further adjustments:

- Treat GMT as a legacy alias of UTC ([#16292])
- Add `/etc/zoneinfo` to zoneinfo lookup paths ([#16463])
- Add support for `$TZDIR` ([#16466])

_Thanks, [@straight-shoota]_

[`Time::Instant`]: https://crystal-lang.org/api/1.19.0/Time/Instant.html
[RFC 0015]: https://github.com/crystal-lang/rfcs/pull/15
[#16490]: https://github.com/crystal-lang/crystal/pull/16490
[#16498]: https://github.com/crystal-lang/crystal/pull/16498
[#16516]: https://github.com/crystal-lang/crystal/pull/16516
[#16545]: https://github.com/crystal-lang/crystal/pull/16545
[#16463]: https://github.com/crystal-lang/crystal/pull/16463
[#16466]: https://github.com/crystal-lang/crystal/pull/16466
[#16292]: https://github.com/crystal-lang/crystal/pull/16292

### Process

A long refactor of spawning sub-processes has started. It encompasses a tedious
cleanup and safety fixes related to finding the command as well as building the
arguments and environment variables, to eventually move on from the classic
`fork` then `exec` to the more modern `posix_spawn` on UNIX targets.

- Create `argv` before `fork` ([#16286], [#16321])
- Move `make_envp` before `fork` ([#16351])
- Use `execvpe` when available ([#16294], [#16311])
- Replace `Dir.cd` with a non-raising alternative in pre-exec ([#16352], [#16369])
- Fix reset directory if `Process.exec` fails ([#16383])
- Disable process cancellation during `fork` ([#16446])

_Thanks, [@straight-shoota]_

[#16286]: https://github.com/crystal-lang/crystal/pull/16286
[#16321]: https://github.com/crystal-lang/crystal/pull/16321
[#16351]: https://github.com/crystal-lang/crystal/pull/16351
[#16294]: https://github.com/crystal-lang/crystal/pull/16294
[#16311]: https://github.com/crystal-lang/crystal/pull/16311
[#16352]: https://github.com/crystal-lang/crystal/pull/16352
[#16369]: https://github.com/crystal-lang/crystal/pull/16369
[#16383]: https://github.com/crystal-lang/crystal/pull/16383
[#16446]: https://github.com/crystal-lang/crystal/pull/16446

### Standard library

New methods:

- Add [`NamedTuple#reverse_merge`] ([#16229])
- Add [`Set#map!`] ([#16271])
- Add [`Hash#transform_keys!`] ([#16280])
- Add [`OpenSSL::SSL::Context::Server#on_server_name`] for SNI ([#16452], [#16525])
- Add [`IPSocket#ipv6_only`] ([#16347])
- Add [`Int.from_digits`] as inverse of [`Int#digits`] ([#16237])
- Add [`BigInt.from_digits`] ([#16259])
- Add [`Int#tdivmod`] ([#16258])
- Add [`Random.next_bool`] and [`Random.next_int`] ([#16297])
- Add [`Random#split`] and `Random.split` for splittable PRNGs ([#16342], [#16495])
- Add [`Pointer#fill`] ([#16338])
- Add [`Process.debugger_present?`] for Windows and Linux ([#16248])
- Add [`Path#relative?`] ([#16473])
- Add [`YAML::Nodes.parse_all`] ([#16247])
- Add [`::exit(Process::Status)`] ([#16436])

Enhancements:

- Support large JSON files ([#16211])
- Support deserialization of YAML anchors of value types ([#16186])
- Add end locations to scalars and aliases in `YAML::Nodes.parse` ([#16187])
- Set `JSON::SerializableError#attribute` when appropriate ([#16158])
- Add `remove_empty` parameter to `String#each_line` ([#16232])
- Add `weeks` parameter to `Time::Span.new` ([#16208])
- Support 0X, 0O, 0B prefixes in string to integer conversion ([#16226])

_Thanks, [@andrykonchin], [@carlhoerberg], [@HertzDevil], [@ysbaddaden], [@straight-shoota], [@RX14], [@Sija], [@spuun]_

[`NamedTuple#reverse_merge`]: https://crystal-lang.org/api/master/NamedTuple.html#reverse_merge(other:NamedTuple)-instance-method
[`Set#map!`]: https://crystal-lang.org/api/master/Set.html#map!(&:T-%3ET):self-instance-method
[`Hash#transform_keys!`]: https://crystal-lang.org/api/master/Hash.html#transform_keys!(&:K,V-%3EK):self-instance-method
[`OpenSSL::SSL::Context::Server#on_server_name`]: https://crystal-lang.org/api/master/OpenSSL/SSL/Context/Server.html#on_server_name(&block:String-%3EOpenSSL::SSL::Context::Server|Nil)-instance-method
[`IPSocket#ipv6_only`]: https://crystal-lang.org/api/master/IPSocket.html#ipv6_only?:Bool-instance-method
[`Int.from_digits`]: https://crystal-lang.org/api/master/Int32.html#from_digits(digits:Enumerable(Int),base:Int=10):self-class-method
[`BigInt.from_digits`]: https://crystal-lang.org/api/master/BigInt.html#from_digits(digits:Enumerable(Int),base:Int=10):self-class-method
[`Int#tdivmod`]: https://crystal-lang.org/api/master/Int.html#tdivmod(other:Int)-instance-method
[`Random.next_bool`]: https://crystal-lang.org/api/master/Random.html#next_bool:Bool-instance-method
[`Random.next_int`]: https://crystal-lang.org/api/master/Random.html#next_int:Int32-instance-method
[`Random#split`]: https://crystal-lang.org/api/master/Random.html#split%3Aself-instance-method
[`Pointer#fill`]: https://crystal-lang.org/api/master/Pointer.html#fill(count:Int,value:T):self-instance-method
[`Process.debugger_present?`]: https://crystal-lang.org/api/master/Process.html#debugger_present?:Bool-class-method
[`Path#relative?`]: https://crystal-lang.org/api/master/Path.html#relative?:Bool-instance-method
[`YAML::Nodes.parse_all`]: https://crystal-lang.org/api/master/YAML/Nodes.html#parse_all(string_or_io:String|IO):Array(Document)-class-method
[`::exit(Process::Status)`]: https://crystal-lang.org/api/master/toplevel.html#exit(status:Int32|Process::Status=0):NoReturn-class-method
[#16229]: https://github.com/crystal-lang/crystal/pull/16229
[#16271]: https://github.com/crystal-lang/crystal/pull/16271
[#16280]: https://github.com/crystal-lang/crystal/pull/16280
[#16452]: https://github.com/crystal-lang/crystal/pull/16452
[#16525]: https://github.com/crystal-lang/crystal/pull/16525
[#16347]: https://github.com/crystal-lang/crystal/pull/16347
[#16237]: https://github.com/crystal-lang/crystal/pull/16237
[#16259]: https://github.com/crystal-lang/crystal/pull/16259
[#16258]: https://github.com/crystal-lang/crystal/pull/16258
[#16220]: https://github.com/crystal-lang/crystal/pull/16220
[#16297]: https://github.com/crystal-lang/crystal/pull/16297
[#16342]: https://github.com/crystal-lang/crystal/pull/16342
[#16495]: https://github.com/crystal-lang/crystal/pull/16495
[#16338]: https://github.com/crystal-lang/crystal/pull/16338
[#16248]: https://github.com/crystal-lang/crystal/pull/16248
[#16473]: https://github.com/crystal-lang/crystal/pull/16473
[#16247]: https://github.com/crystal-lang/crystal/pull/16247
[#16436]: https://github.com/crystal-lang/crystal/pull/16436

### Macros

New methods:

- [`StringLiteral#gsub(&)`] ([#16376])
- [`StringLiteral#split(RegexLiteral)`] ([#16378])
- [`StringLiteral#match`] ([#16464])

_Thanks, [@Blacksmoke16], [@HertzDevil]_

- All overloads of `ArrayLiteral#[]` return `nil` on out of bounds ([#16453])

_Thanks, [@HertzDevil]_

[`StringLiteral#gsub(&)`]: https://crystal-lang.org/api/1.19.0/Crystal/Macros/StringLiteral.html#gsub%28regex%3ARegexLiteral%2C%26%3AStringLiteral%2CArrayLiteral%28StringLiteral%7CNilLiteral%29-%3E_%29%3AStringLiteral-instance-method
[`StringLiteral#split(RegexLiteral)`]: https://crystal-lang.org/api/1.19.0/Crystal/Macros/StringLiteral.html#split%28node%3ARegexLiteral%29%3AArrayLiteral%28StringLiteral%29-instance-method
[`StringLiteral#match`]: https://crystal-lang.org/api/1.19.0/Crystal/Macros/StringLiteral.html#match%28regex%3ARegexLiteral%29%3AHashLiteral%28NumberLiteral%7CStringLiteral%2CStringLiteral%7CNilLiteral%29-instance-method
[#16376]: https://github.com/crystal-lang/crystal/issues/16376
[#16378]: https://github.com/crystal-lang/crystal/issues/16378
[#16464]: https://github.com/crystal-lang/crystal/issues/16464
[#16453]: https://github.com/crystal-lang/crystal/issues/16453

### Compiler

### Docs

- Add optional sanitizer to docs generator ([#14646], [#16251]

_Thanks [@nobodywasishere], [@straight-shoota]_

[#14646]: https://github.com/crystal-lang/crystal/pull/14646
[#16251]: https://github.com/crystal-lang/crystal/pull/16251

### Infra

We finally build Linux ARM64 binaries of Crystal releases and nighlies.

- Build linux aarch64 tarballs ([#16330])
- Build snap arm64 target ([#16491])
- Enable multiarch docker builds ([#16493])
- Encourage +1 reactions on issues and PRs for prioritization ([#16241])

_Thanks [@straight-shoota], [@ysbaddaden]_

[#16330]: https://github.com/crystal-lang/crystal/pull/16330
[#16491]: https://github.com/crystal-lang/crystal/pull/16491
[#16493]: https://github.com/crystal-lang/crystal/pull/16493
[#16241]: https://github.com/crystal-lang/crystal/pull/16241

### Dependencies

The memory management model for libxml2 changed in Crystal 1.17 to become manual
instead of integrating the GC. The change introduced some memory leaks that have
now been fixed.

- Memory leak in `XML.parse` and `XML.parse_html` methods ([#16414])
- Memory leak in `XML::Document#finalize` ([#16418])
- Memory leak in `XML::Node#content=` ([#16419])
- Fix use after unlink in `XML::Node` ([#16432])

_Thanks, [@toddsundsted]_

The OpenSSL bindings now require OpenSSL 1.1.1+ or LibreSSL 3+. We expect the
change to not have any effect since these versions are no longer distributed by
any supported operating system.

_Thanks [@ysbaddaden]_

[#16414]: https://github.com/crystal-lang/crystal/issues/16414
[#16418]: https://github.com/crystal-lang/crystal/issues/16418
[#16419]: https://github.com/crystal-lang/crystal/issues/16419
[#16432]: https://github.com/crystal-lang/crystal/issues/16432
[#16480]: https://github.com/crystal-lang/crystal/issues/16480

### Deprecations

- Deprecate single-letter macro fresh variables with indices ([#16267])
- Deprecate macro fresh variables with constant names ([#16293])
- Deprecate `StringLiteral#split(ASTNode)` ([#16439])
- Deprecate `Time.monotonic` ([#16545])
- Deprecate `Time#inspect(io, *, with_nanoseconds)` ([#16416])

_Thanks [@HertzDevil], [@straight-shoota]_

[#16267]: https://github.com/crystal-lang/crystal/pull/16267
[#16293]: https://github.com/crystal-lang/crystal/pull/16293
[#16439]: https://github.com/crystal-lang/crystal/pull/16439
[#16545]: https://github.com/crystal-lang/crystal/pull/16545
[#16416]: https://github.com/crystal-lang/crystal/pull/16416

---

> **THANKS:**
>
> We have been able to do all of this thanks to the continued support of
> [84codes](https://www.84codes.com/) and every other [sponsor](/sponsors).  To
> maintain and increase the development pace, donations and sponsorships are
> essential.  [OpenCollective](https://opencollective.com/crystal-lang) is
> available for that.
>
> Reach out to [crystal@manas.tech](mailto:crystal@manas.tech) if you’d like to
> become a direct sponsor or find other ways to support Crystal. We thank you in
> advance!

[issue tracker]: https://github.com/crystal-lang/crystal/issues
[forum]: https://forum.crystal-lang.org/
[84codes]: https://www.84codes.com/
[@andrykonchin]: https://github.com/andrykonchin
[@Blacksmoke16]: https://github.com/Blacksmoke16
[@carlhoerberg]: https://github.com/carlhoerberg
[@HertzDevil]: https://github.com/HertzDevil
[@RX14]: https://github.com/RX14
[@Sija]: https://github.com/Sija
[@spuun]: https://github.com/spuun
[@straight-shoota]: https://github.com/straight-shoota
[@toddsundsted]: https://github.com/toddsundsted
[@ysbaddaden]: https://github.com/ysbaddaden

