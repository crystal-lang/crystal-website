---
title: Crystal 1.14.0 is released!
version: 1.14.0
date: 2024-10-09
author: straight-shoota
---
We are announcing a new Crystal release with several new features and bug fixes.

Pre-built packages are available on [GitHub Releases](https://github.com/crystal-lang/crystal/releases/tag/1.14.0)
and our official distribution channels.
See [crystal-lang.org/install](https://crystal-lang.org/install/) for
installation instructions.

## Stats

This release includes [❓ changes since 1.13.3](https://github.com/crystal-lang/crystal/pulls?q=is%3Apr+milestone%3A1.14.0)
by ❓ contributors. We thank all the contributors for all the effort put into
improving the language! ❤️

## Advances in multi-threading support

As part of the [project to improve multi-threading support](/2024/02/09/84codes-manas-mt) with the help of [84codes],
this release includes several improvements and refactors related to concurrency and the event loop. So far, these have been mostly internal changes with minor relevance from a user's point of view. We expect more significant changes in the next release.

A preview of the upcoming execution context ([RFC](https://github.com/crystal-lang/rfcs/pull/2)) is available as a standalone shard: [`ysbaddaden/execution_context`](https://github.com/ysbaddaden/execution_context). It's available for testing by eager developers. This library is expected to be part of the compiler once we are certain it's ready.

## Changes

Below we list the most remarkable changes in the language, compiler and stdlib.
For more details, visit the [full changelog](https://github.com/crystal-lang/crystal/releases/tag/1.14.0).

### Breaking

`Slice#[start, count]` accepts a negative index for `start`, like similar methods already do.
This would break existing code that depends on the current behaviou that a negative start index raises `IndexError` ([#14778], thanks @ysbaddaden).
[#14778]: https://github.com/crystal-lang/crystal/pull/14778

Finalizers for `Socket` and `IO::FileDescriptor` do no longer flush.
Flushing is too heavy for a finalizer, as it might involve the event loop and even memory allocations which must be strictly avoided in a finalizer.
Be sure to always flush before letting a stream go out of scope, ideally with an explicit `#close` ([#14882], thanks @straight-shoota).
[#14882]: https://github.com/crystal-lang/crystal/pull/14882

`XML::Error.errors` had been deprecated since [1.7.0](/releases/2023-01-09-1.7.0-released.md), but continued to work.
This unconditioned availability causes a serious memory leak, which cannot be fixed without disabling `XML::Error.errors`.
In order to make this obvious, calling the method causes a compile time error now. ([#14936], thanks @straight-shoota)
[#14936]: https://github.com/crystal-lang/crystal/pull/14936

`Hash::Entry` has been removed from public API docs. It was never intended to be a public type. ([#14881], thanks @Blacksmoke16)
[#14881]: https://github.com/crystal-lang/crystal/pull/14881

### Language features

Allow `^` in constant numeric expressions ([#14951], thanks @HertzDevil).

[#14951]: https://github.com/crystal-lang/crystal/pull/14951

`HashLiteral` and `NamedTupleLiteral` respond to `#has_key?`, just like their regular counterparts `Hash` and `NamedTuple` ([#14890], thanks @kamil-gwozdz)

### Standard library

- Support ARM64 Windows ([#14911], thanks @HertzDevil)


[#14911]: https://github.com/crystal-lang/crystal/pull/14911


- *(collection)* Add `Slice#same?` ([#14728], thanks @straight-shoota)
[#14728]: https://github.com/crystal-lang/crystal/pull/14728
- *(runtime)* Add `Pointer::Appender#to_slice` ([#14874], thanks @straight-shoota)
[#14874]: https://github.com/crystal-lang/crystal/pull/14874

- *(concurrency)* Add `WaitGroup.wait` and `WaitGroup#spawn` ([#14837], thanks @jgaskins)
[#14837]: https://github.com/crystal-lang/crystal/pull/14837

- *(codegen)* Fix avoid linking `libpcre` when unused ([#14891], thanks @kojix2)
[#14891]: https://github.com/crystal-lang/crystal/pull/14891

### Windows

- *(concurrency)* Open non-blocking regular files as overlapped on Windows ([#14921], thanks @HertzDevil)
- *(concurrency)* Support non-blocking `File#read` and `#write` on Windows ([#14940], thanks @HertzDevil)
- *(concurrency)* Support non-blocking `File#read_at` on Windows ([#14958], thanks @HertzDevil)
- *(concurrency)* Support non-blocking `Process.run` standard streams on Windows ([#14941], thanks @HertzDevil)
- *(concurrency)* Support `IO::FileDescriptor#flock_*` on non-blocking files on Windows ([#14943], thanks @HertzDevil)
- *(concurrency)* Emulate non-blocking `STDIN` console on Windows ([#14947], thanks @HertzDevil)
- *(concurrency)* Async DNS resolution on Windows ([#14979], thanks @HertzDevil)
- *(system)* Implement `System::User` on Windows ([#14933], thanks @HertzDevil)
- *(system)* Implement `System::Group` on Windows ([#14945], thanks @HertzDevil)

[#14921]: https://github.com/crystal-lang/crystal/pull/14921
[#14940]: https://github.com/crystal-lang/crystal/pull/14940
[#14958]: https://github.com/crystal-lang/crystal/pull/14958
[#14941]: https://github.com/crystal-lang/crystal/pull/14941
[#14943]: https://github.com/crystal-lang/crystal/pull/14943
[#14947]: https://github.com/crystal-lang/crystal/pull/14947
[#14979]: https://github.com/crystal-lang/crystal/pull/14979
[#14933]: https://github.com/crystal-lang/crystal/pull/14933
[#14945]: https://github.com/crystal-lang/crystal/pull/14945

- *(interpreter)* Enable the interpreter on Windows ([#14964], thanks @HertzDevil)
[#14964]: https://github.com/crystal-lang/crystal/pull/14964

### `URI::Params`

- *(serialization)* Add `URI.from_json_object_key?` and `URI#to_json_object_key` ([#14834], thanks @nobodywasishere)
- *(serialization)* Add `URI::Params::Serializable` ([#14684], thanks @Blacksmoke16)
[#14834]: https://github.com/crystal-lang/crystal/pull/14834
[#14684]: https://github.com/crystal-lang/crystal/pull/14684

### Compiler tools

- *(cli)* Adds initial support for external commands ([#14953], thanks @bcardiff)
[#14953]: https://github.com/crystal-lang/crystal/pull/14953

- *(docs-generator)* Add nodoc filter to doc type methods ([#14910], thanks @spuun)

[#14910]: https://github.com/crystal-lang/crystal/pull/14910

### Performance


- *(codegen)* Reduce calls to `Crystal::Type#remove_indirection` in module dispatch ([#14992], thanks @HertzDevil)

[#14992]: https://github.com/crystal-lang/crystal/pull/14992

- Avoid unwinding the stack on hot path in method call lookups ([#15002], thanks @ggiraldez)
- *(codegen)* Compiler: enable parallel codegen with MT ([#14748], thanks @ysbaddaden)

[#15002]: https://github.com/crystal-lang/crystal/pull/15002
[#14748]: https://github.com/crystal-lang/crystal/pull/14748

### Dependencies

- *(crypto)* Update `LibCrypto` bindings for LibreSSL 3.5+ ([#14872], thanks @straight-shoota)
[#14872]: https://github.com/crystal-lang/crystal/pull/14872
- *(text)* Support Unicode 16.0.0 ([#14997], thanks @HertzDevil)
[#14997]: https://github.com/crystal-lang/crystal/pull/14997
- *(interpreter:repl)* Update REPLy version ([#14950], thanks @HertzDevil)

[#14950]: https://github.com/crystal-lang/crystal/pull/14950

## Deprecations

-
- *(runtime)* **[deprecation]** Deprecate `Pointer.new(Int)` ([#14875], thanks @straight-shoota)

[#14875]: https://github.com/crystal-lang/crystal/pull/14875
- **[deprecation]** Use `Time::Span` in `Benchmark.ips` ([#14805], thanks @HertzDevil)
[#14805]: https://github.com/crystal-lang/crystal/pull/14805

- **[deprecation]** Deprecate `::sleep(Number)` ([#14962], thanks @HertzDevil)

[#14962]: https://github.com/crystal-lang/crystal/pull/14962

---

> **THANKS:**
> We have been able to do all of this thanks to the continued support of [84codes](https://www.84codes.com/) and every other [sponsor](/sponsors).
> To maintain and increase the development pace, donations and sponsorships are
> essential. [OpenCollective](https://opencollective.com/crystal-lang) is
> available for that.
>
> Reach out to [crystal@manas.tech](mailto:crystal@manas.tech)
> if you’d like to become a direct sponsor or find other ways to support Crystal.
> We thank you in advance!

[@ysbaddaden]: https://github.com/ysbaddaden
[@jgaskins]: https://github.com/jgaskins
[@HertzDevil]: https://github.com/HertzDevil
[@straight-shoota]: https://github.com/straight-shoota
[@Blacksmoke16]: https://github.com/Blacksmoke16
[@hovsater]: https://github.com/hovsater
[@summer-alice]: https://github.com/summer-alice
[@meatball133]: https://github.com/meatball133
[@Hadeweka]: https://github.com/@Hadeweka
[84codes]: https://www.84codes.com/
